<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Vue 中多个元素或组件的过度</title>
        <script src="./vue.js"></script>

        <style>
            .v-enter, .v-leave-to {
                opacity: 0;
            }
            .v-enter-active, .v-leave-active {
                transition: opacity 1s;
            }
        </style>
    </head>
    <body>

        <div id="root">

            <!-- 
                需求 
                点击事件让两个div交替显示

                为两个div添加过度动画(多个元素之间的过度)
                Vue DOM会存在复用导致动画效果不生效为每个div取一个key名就不会复用DOM

                transition 标签属性
                    mode="in-out" 先显示后隐藏
                    mode="out-in" 先隐藏后显示
             -->
            <transition mode="in-out">
                <div v-if="show" key="hello">Hello World</div>
                <div v-else key="by">By World</div>
            </transition>
            <button @click="handleClick">toggle</button>

            <hr/>

            <!-- 
                多个组件过度效果
                使用v-if else 方式实现
             -->
            <transition mode="in-out">
                <child v-if="show"></child>
                <child-one v-else></child-one>
            </transition>
            <button @click="handleClick">toggle</button>

            <hr/>

            <!-- 
                多个组件过度效果
                使用动态组件方式实现
             -->
            <transition mode="in-out">
                <component :is="type"></component>
            </transition>
            <button @click="handleClick">toggle</button>
        </div>

        <script>

            Vue.component('child', {
                template: '<div>child</div>'
            })

            Vue.component('child-one', {
                template: '<div>child-one</div>'
            })

            var vm = new Vue({
                el: '#root',
                data: {
                    show: true,
                    type: "child"
                },
                methods: {
                    handleClick: function() { 
                        this.show = !this.show
                        this.type = this.type === 'child' ? 'child-one' : 'child'
                    }
                }
            })
        </script>

    </body>
</html>